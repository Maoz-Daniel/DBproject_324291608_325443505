# רשת חדרי כושר
מערכת בקרת כניסות ויציאות

**מגישים:**

- מעוז דניאל, 324291608  
- אסף קלר, 325443505  


## תוכן עניינים

- [שלב א: עיצוב ובניית בסיס הנתונים](#שלב-א-עיצוב-ובניית-בסיס-הנתונים)
    - [הקדמה](#הקדמה)
    - [עיצוב בסיס הנתונים](#עיצוב-בסיס-הנתונים)
    - [יצירת בסיס הנתונים ואכלוסו](#יצירת-בסיס-הנתונים-ואכלוסו)
    - [גיבוי](#גיבוי)


## שלב-א-עיצוב-ובניית-בסיס-הנתונים

## הקדמה
בסיס הנתונים של בקרת כניסות ויציאות בחדרי הכושר נועד לנהל ביעילות מידע הקשור למנויים, עובדים, מכשירי גישה, תיקונים, אזורים ומכוני כושר. המערכת מבטיחה ארגון מסודר ומעקב אחר נתונים חיוניים כמו רישומי כניסה ויציאה, חברות מנויים, תחזוקת ציוד ופרטי עובדים.

### מטרת בסיס הנתונים
בסיס הנתונים משמש פתרון מסודר ואמין לניהול הפעילות ברשת חדרי כושר, ומטרתו:

- לנהל מעקב אחרי כניסות ויציאות של מנויים ועובדים מאזורים שונים במכוני הכושר.
- לעקוב אחרי מצב המכשירים השונים, לדווח ולנהל תיקונים ותחזוקה.
- לשמור על נתוני מנויים, כולל סוג חברות, תוקף החברות ופרטים אישיים.
- לנהל אזורי גישה שונים בתוך מכוני הכושר ולהגדיר הרשאות כניסה אליהם.
- לשמור מידע על עובדים, כולל פרטי התקשרות, תאריכי העסקה ותפקידים.

### מקרי שימוש אפשריים
- **מנהלי חדרי כושר** יכולים לעקוב ולנהל מידע על מנויים, מכשירים, אזורי גישה ועובדים.
- **מנויים** יכולים לקבל מידע מעודכן על סוג החברות שלהם, תוקף החברות ופרטי ביקורם בחדר הכושר.
- **עובדי תחזוקה** יכולים לקבל גישה לרשימות מכשירים שדורשים תיקון, לדווח על תיקונים שבוצעו, ולקבל מידע אודות המכשירים באחריותם.
- **הנהלה וצוות העובדים** יכולים להשתמש במערכת לניהול המידע, תכנון וארגון העבודה בצורה יעילה ומסודרת.

בסיס הנתונים בנוי בצורה שמייעלת את פעילות רשת חדרי הכושר, תוך שמירה על סדר, שקיפות ותקשורת נוחה בין כל הגורמים המעורבים.

---

## עיצוב בסיס הנתונים

### ERD

![ERD](Stage_A/ERD_and_DSD/ERD.png)



הסבר על התרשים:  קיימת לנו יישות בן-אדם, שממנו יורשות שתי ישויות: מנוי ועובד תחזוקה. כל עובד תחזוקה אחראי על אזור תיקון מסוים, ובנוסף יכול לתקן מכשיר גישה. עבור כל אדם שנכנס לאזור מסוים בחדר הכושר יש רשומת כניסה ורשומת יציאה. כל רשומת כניסה ויציאה היא ישות חלשה שתלויה באדם ובמכשיר גישה.  כל מכשיר גישה הוא ישות חלשה שתלויה באזור, וכל אזור הוא ישות חלשה שתלויה בחדר כושר מסוים
### DSD
![DSD](Stage_A/ERD_and_DSD/Schemas.png)

## יצירת בסיס הנתונים ואכלוסו

### יצירת בסיס הנתונים
- קובץ יצירת הטבלאות: [createTables.sql](Stage_A/scripts/createTables.sql)
- קובץ הכנסה לטבלאות: [insertTables.sql](Stage_A/scripts/insertTables.sql)
- קובץ מחיקת הטבלאות: [dropTables.sql](Stage_A/scripts/dropTables.sql)
- קובץ בחירת כל הטבלאות: [selectAll.sql](Stage_A/scripts/selectAll.sql)
- 
### אכלוס הנתונים
אכלסנו את הנתונים ב־3 דרכים:

**1. Mockaroo**  
יצרנו את הנתונים בצורה רנדומלית באתר עבור הסכמה של חדר כושר והעלנו את הקובץ ישירות  

![צילום מסך של Mockaroo](Stage_A/data/mockaroo/gym_mockaroo.png)

[📄 הורדת קובץ ה־CSV – gym_400.csv](Stage_A/data/mockaroo/gym_400.csv)

**2. הכנסת נתונים מקבצים**  
כתבנו קוד בפייתון שיוצר דאטה עבור הסכמות של מכשירי גישה, אזורים ותיקון, ומעביר את הנתונים לקובץ CSV, אותו העלינו ישירות ל־Postgres.  
- [קובץ מכשירי גישה (accessDevice.csv)](Stage_A\data\csv\accessDevice\accessDevice.csv)
- [קובץ אזורים (zone.csv)](Stage_A\data\csv\zone\zone.csv)
- [קובץ תיקונים (repair.csv)](Stage_A\data\csv\repair\repair.csv)
  
![inserts](Stage_A/data/csv/insert_csv_device_repair_zone_gym.png)




בנוסף, הכנסנו בצורה ידנית את פקודות ה־INSERT עבור מנויים, אנשים ועובדי תחזוקה.  
#### 🔗 קישורים לקבצים:
- [insert_devices.sql](Stage_A/data/insert%20commands/insert_devices.sql)
- [insert_zones.sql](Stage_A/data/insert%20commands/insert_zones.sql)
- [insert_repairs.sql](Stage_A/data/insert%20commands/insert_repairs.sql)

**3. יצירת סקריפט בפייתון**  
יצרנו נתונים בעזרת סקריפט פייתון עבור רשומות הכניסה והיציאה, אותם העברנו לתוך קובץ CSV והעלינו אותם ישירות ל־Postgres מתוך הסקריפט.  
##### 🟢 רשומות כניסה (Entry Records)

- [entryRecord.csv](Stage_A/data/python%20scripts/entry_record/entryRecord.csv)  
- [insert_entry_record.py](Stage_A/data/python%20scripts/entry_record/insert_entry_record.py)

##### 🔴 רשומות יציאה (Exit Records)

- [exitRecord.csv](Stage_A/data/python%20scripts/exit_record/exitRecord.csv)  
- [insert_exit_record.py](Stage_A/data/python%20scripts/exit_record/insert_exit_record.py)
## גיבוי
קובץ הגיבוי נשמר עם תאריך הגיבוי 
![צילום מסך של פעולת הגיבוי](Stage_A/backup/backup.png)  
[ הורדת קובץ הגיבוי (backup1_642025)](Stage_A/backup/backup1_642025)

---

##### 🔁 פעולת שחזור:

![צילום מסך של פעולת השחזור](Stage_A/backup/restore.png)

